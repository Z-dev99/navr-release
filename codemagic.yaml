workflows:
  ios-simulator-build:
    name: iOS Simulator Build
    environment:
      flutter: stable
      xcode: latest
      cocoapods: default
      vars:
        GOOGLE_CLIENT_ID_IOS: 157881781771-hjg3elnkvn4qp9t58muv66pn7f2i60i3.apps.googleusercontent.com
        GOOGLE_SERVER_CLIENT_ID: 157881781771-0mdk1l0fi9ns4mssu920rjudiir1uoqq.apps.googleusercontent.com

    scripts:
      - name: üìÑ –°–æ–∑–¥–∞—ë–º .env —Ñ–∞–π–ª
        script: |
          echo "GOOGLE_CLIENT_ID_IOS=$GOOGLE_CLIENT_ID_IOS" >> .env
          echo "GOOGLE_SERVER_CLIENT_ID=$GOOGLE_SERVER_CLIENT_ID" >> .env

      - name: üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        script: flutter pub get

      - name: ‚òï –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º pods
        script: |
          cd ios
          pod install
          cd ..

      - name: üõ† –°–±–æ—Ä–∫–∞ –¥–ª—è iOS —Å–∏–º—É–ª—è—Ç–æ—Ä–∞
        script: flutter build ios --simulator

    artifacts:
      - build/ios/iphonesimulator/Runner.app
